<div class="course-list-container">
  <div class="container">
    <div class="page-header">
      <div class="header-content">
        <h1>Discover Courses</h1>
        <p>Explore our collection of high-quality courses</p>
      </div>
    </div>

    <div class="filters">
      <div class="search-box">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
            clip-rule="evenodd"
          />
        </svg>
        <input
          type="text"
          placeholder="Search courses..."
          [value]="searchQuery()"
          (input)="onSearchChange($any($event.target).value)"
        />
      </div>

      <div class="sort-box">
        <label for="sort">Sort by:</label>
        <select
          id="sort"
          [value]="sortOption()"
          (change)="onSortChange($any($event.target).value)"
        >
          <option value="rating-desc">Rating: High to Low</option>
          <option value="rating-asc">Rating: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="price-asc">Price: Low to High</option>
        </select>
      </div>
    </div>

    @if (!authStore.isAuthenticated()) {
    <div class="info-banner">
      <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
          clip-rule="evenodd"
        />
      </svg>
      <span
        >Please <a routerLink="/login">login</a> to access full features like
        favorites and cart</span
      >
    </div>
    } @if (coursesStore.isLoading()) {
    <div class="loading">
      <div class="spinner-large"></div>
      <p>Loading courses...</p>
    </div>
    } @else if (filteredAndSortedCourses().length === 0) {
    <div class="empty-state">
      <svg width="80" height="80" viewBox="0 0 20 20" fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
          clip-rule="evenodd"
        />
      </svg>
      <h3>No courses found</h3>
      <p>Try adjusting your search or filters</p>
    </div>
    } @else {
    <div class="courses-grid">
      @for (course of filteredAndSortedCourses(); track (course._id || course.id)) {
      <app-course-card
        [course]="course"
        [showActions]="authStore.isAuthenticated()"
      />
      }
    </div>
    }
  </div>
</div>
